{% extends 'header.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html  >
<head>
  <!-- Site made with Mobirise Website Builder v5.9.17, https://mobirise.com -->
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Mobirise v5.9.17, mobirise.com">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
  <link rel="shortcut icon" href="{% static 'assets/images/logo.png' %}" type="image/x-icon">
  <meta name="description" content="">
  
  
  <title>events</title>
  <link rel="stylesheet" href="{% static 'assets/web/assets/mobirise-icons2/mobirise2.css' %}">
  <link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap-grid.min.css' %}">
  <link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap-reboot.min.css' %}">
  <link rel="stylesheet" href="{% static 'assets/animatecss/animate.css' %}">
  <link rel="stylesheet" href="{% static 'assets/dropdown/css/style.css' %}">
  <link rel="stylesheet" href="{% static 'assets/socicon/css/styles.css' %}">
  <link rel="stylesheet" href="{% static 'assets/theme/css/style.css' %}">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Inter+Tight:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter+Tight:100,200,300,400,500,600,700,800,900,100i,200i,300i,400i,500i,600i,700i,800i,900i&display=swap"></noscript>
  <link rel="preload" as="style" href="{% static 'assets/mobirise/css/mbr-additional.css' %}?v=WsYdHF"><link rel="stylesheet" href="{% static 'assets/mobirise/css/mbr-additional.css' %}?v=WsYdHF" type="text/css">
  <style>
    .location-container {
        display: flex;
        align-items: center;
    }

    .location-icon {
        margin-right: 10px; /* Adjust as needed */
    }
</style>
 <script src="https://js.stripe.com/v3/"></script> 
  
  
</head>
<body>

<section data-bs-version="5.1" class="pricing02 cid-uah8IfTh7X" id="pricing02-2z">
  
  
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 content-head">
        <div class="mbr-section-head mb-5">
          <h4 class="mbr-section-title mbr-fonts-style align-center mb-0 display-2">
            <strong>Checkout</strong></h4>
          
          
        </div>
      </div>
    </div>
    <div class="row">
      <div class="item features-image col-12 col-md-6 col-lg-4">
        <div class="item-wrapper">
          <div class="item-img">
            <img src="{{bookevent.event.event_picture.url}}" alt="Mobirise Website Builder">
          </div>
          <div class="item-content">
            <h6 class="item-title mbr-fonts-style display-5">
              <strong>{{bookevent.event.event_name}}</strong>
            </h6>
            <h6 class="item-subtitle mbr-fonts-style display-7">
              <div class="location-container">
                  <img src="{% static 'assets/images/loc.jpeg' %}" alt="Location Icon" class="location-icon" style="height: 2rem; width: 2rem;">
                  <p>{{bookevent.event.event_venue}}</p>
              </div>

            </h6>
            <h6 class="item-subtitle mbr-fonts-style display-7">
              <div class="location-container">
                  <img src="{% static 'assets/images/date.png' %}" alt="Location Icon" class="location-icon" style="height: 2rem; width: 2rem;">
                  <p>{{bookevent.event.event_date}}</p>
              </div>
              <h6 class="item-subtitle mbr-fonts-style display-7">
              <div class="location-container">
                  <img src="{% static 'assets/images/time.png' %}" alt="Location Icon" class="location-icon" style="height: 2rem; width: 2rem;">
                  <p>{{bookevent.event.event_time}}</p>
              </div>
            </h6>
            <h6 class="item-subtitle mbr-fonts-style display-7">
              <div class="location-container">
                  <img src="{% static 'assets/images/price.png' %}" alt="Location Icon" class="location-icon" style="height: 2rem; width: 2rem;">
                  <p>{{bookevent.event.event_price}}â‚¹</p>
              </div>
            </h6>
            <div class="mbr-section-btn item-footer">{% if bookevent.payment_status == False %}
              <form method="post">
                <input type="hidden" id="net_price" name="amount" value="{{total_price}}">
                  <button type="button" class="btn item-btn btn-primary display-7" id="checkout-button">Proceed For Payment</button>
              </form>
              {% else %}<a href=""disabled class="btn item-btn btn-primary display-7" disabled>Already Booked</a>
              {% endif %}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
</section><section class="display-7" style="padding: 0;align-items: center;justify-content: center;flex-wrap: wrap;    align-content: center;display: flex;position: relative;height: 4rem;"><a href="https://mobirbookevent.se/3190223" style="flex: 1 1;height: 4rem;position: absolute;width: 100%;z-index: 1;"><img alt="" style="height: 4rem;" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="></a><p style="margin: 0;text-align: center;" class="display-7">&#8204;</p><a style="z-index:1" href="https://mobirise.com/builder/ai-website-maker.html">AI Website Maker</a></section><script src="{% static 'assets/bootstrap/js/bootstrap.bundle.min.js' %}"></script>  <script src="{% static 'assets/smoothscroll/smooth-scroll.js' %}"></script>  <script src="{% static 'assets/ytplayer/index.js' %}"></script>  <script src="{% static 'assets/dropdown/js/navbar-dropdown.js' %}"></script>  <script src="{% static 'assets/theme/js/script.js' %}"></script>

<script type="text/javascript">

var stripe = Stripe('pk_test_51MshH6SJuXwPfjjrrgxJ5tubbOgYAhRrqNcd4RDUSq1peWpIMZrjhIiTncSUWO9u6byeDf4KxdZPkFD4hU55mVOg00aRL5RT8x');
var checkoutButton = document.getElementById('checkout-button');
data={
    post_data:'{{total_price}}',
    post_data1:'{{be}}'
}
checkoutButton.addEventListener('click', function() { 
 fetch('/create-checkout-session/', {
 method: 'POST',
    headers:{
        'Accept': 'application/json',
        'X-Requested-With': 'XMLHttpRequest', //Necessary to work with request.is_ajax()

    },
    body: JSON.stringify(data)

 })
 .then(function(response) {
 return response.json();
 })
 .then(function(session) {
 return stripe.redirectToCheckout({ sessionId: session.id });
 })
 .then(function(result) {
 // If `redirectToCheckout` fails due to a browser or network
 // error, you should display the localized error message to your
 // customer using `error.message`.
 if (result.error) {
 alert(result.error.message);
 }
 })
 .catch(function(error) {
 console.error('Error:', error);
 });
 });
 </script>
  
  <input name="animation" type="hidden">
  </body>
</html>
{% endblock %}